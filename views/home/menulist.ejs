<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      position: relative;
    }

    ul.nav-pills {
      margin-top: 130px;
      position: fixed;
    }
  </style>

  <title>Menu</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body data-spy="scroll" data-offset="1" data-target="#verticalScrollspy">
  <div class="container-fluid">
    <div class="row">
      <nav class="col-3 col-sm-2" id="verticalScrollspy">
        <ul class="nav flex-column nav-pills">
          <li class="nav-item"><a class="nav-link active" href="#item1">한식당</a></li>
          <li class="nav-item"><a class="nav-link" href="#item2">라면</a></li>
          <li class="nav-item"><a class="nav-link" href="#item3">돈까스</a></li>
          <li class="nav-item"><a class="nav-link" href="#item4">우동</a></li>
          <li class="nav-item"><a class="nav-link" href="#item5">볶음밥</a></li>
          <li class="nav-item"><a class="nav-link" href="#item6">기타</a></li>
        </ul>
      </nav>
      <div class="col-9 col-sm-10">
        <h1 id="item1">한식당</h1>
        <div id="display" class="container-fluid">
          여기에 출력
        </div>
        <div class="container-fluid">
          <h1 id="item2">라면</h1>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
        </div>
        <div class="container-fluid">
          <h1 id="item3">돈까스</h1>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
        </div>
        <div class="container-fluid">
          <h1 id="item4">우동</h1>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
        </div>
        <div class="container-fluid">
          <h1 id="item5">볶음밥</h1>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
        </div>
        <div class="container-fluid">
          <h1 id="item6">기타</h1>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
          <p>Look at the navigation menu to see how it interacts with scrolling over this segment</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 메뉴 리스트 읽어오기 -->
  <script>
    const qs = getQueryStringObject();
    const areaName = "서울만남(부산)휴게소";  //휴게소 이름 가져와야함

    // 서버에서 메뉴 정보 가져오기
    $.ajax({
      url: '/requestMenuInfo',
      type: 'POST',
      data: {
        area_nm: areaName,
      },
      success: function (data) {
        resultMenuList(data);
        console.log(data, data.length);
        //drawMenuList(data);
      }
    });

    //API 가져와서 카드에 메뉴넣는 함수
    function resultMenuList(data) {
      var html = "";
      $.each(data, function (key, value) {
        html += "<div class='card w-75'>";
        html += "<div class='card-body'>";
        html += "<h5 class='card-title'>" + value.foodNm;
        if (value.bestfoodyn == 'Y') {
          html += "<span class='badge badge-pill badge-danger' style='font-size:10px;'>BEST</span>";
        }
        html += "</h5>";
        html += "<p class='card-text'> " + value.foodCost + "원</p>";
        html += "<div class='container'>";
        html += "<div class='row'>";
        html += "<a href='#' class='btn btn-primary'>장바구니</a>";
        html += "<a href='#' class='btn btn-primary'>주문하기</a>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
      });
      $("#display").empty();
      $("#display").append(html);
    }

    // qs로 보내준 데이터를(? 이후 데이터) key : value 방식으로 자바스크립트obj 로 풀어주는 함수
    function getQueryStringObject() {
      var a = window.location.search.substr(1).split('&');
      if (a == "") return {};
      var b = {};
      for (var i = 0; i < a.length; ++i) {
        var p = a[i].split('=', 2);
        if (p.length == 1) {
          b[p[0]] = "";
        } else {
          b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
      }
      return b;
    }

    // 메뉴 리스트 그리기
    function drawMenuList(data) {
      const ul = document.getElementById('listItems');
      for (i in data) {
        const li = document.createElement('li');

        const br = document.createElement('br');

        const input = document.createElement('input');
        input.type = 'checkbox';
        input.name = 'foodNm';
        input.value = data[i].foodNm;

        const namespan = document.createElement('span');
        namespan.innerHTML = data[i].foodNm;

        const costspan = document.createElement('span');
        costspan.innerHTML = data[i].foodCost;
        console.log(data[i].foodNm, data[i].foodCost, data[i].seq);

        li.appendChild(namespan);
        li.appendChild(costspan);
        li.appendChild(input);
        //ul.appendChild(li);
        //ul.appendChild(br);
      }
    }
  </script>
</body>

</html>